<h2>Payment</h2>

<!-- Promo Code Input -->
<div>
  <label>Promo Code (optional):</label>
  <input
    type="text"
    [(ngModel)]="promoCode"
    name="promoCode"
    placeholder="Enter promo code"
  />
</div>

<!-- Payment Method Selection -->
<label>Select Payment Method:</label>
<select [(ngModel)]="paymentMethod" (ngModelChange)="onPaymentMethodChange()">
  <option value="credit_card">Credit Card</option>
  <option value="paypal">PayPal</option>
</select>

<!-- Conditional form for Credit Card -->
<div *ngIf="paymentMethod === 'credit_card'">
  <h3>Credit Card Details</h3>
  <form #creditCardForm="ngForm">
    <label>Card Number:</label>
    <input
      type="text"
      [(ngModel)]="creditCardData.cardNumber"
      name="cardNumber"
      required
      pattern="^[0-9]{16}$"
      placeholder="16-digit card number"
    />
    <br />
    <label>Expiry Date (MM/YY):</label>
    <input
      type="text"
      [(ngModel)]="creditCardData.expiry"
      name="expiry"
      required
      pattern="^(0[1-9]|1[0-2])\/[0-9]{2}$"
      placeholder="MM/YY"
    />
    <br />
    <label>CVV:</label>
    <input
      type="text"
      [(ngModel)]="creditCardData.cvv"
      name="cvv"
      required
      pattern="^[0-9]{3}$"
      placeholder="3-digit CVV"
    />
  </form>
</div>

<!-- Conditional form for PayPal -->
<div *ngIf="paymentMethod === 'paypal'">
  <h3>PayPal Details</h3>
  <form #paypalForm="ngForm">
    <label>Email:</label>
    <input
      type="email"
      [(ngModel)]="paypalData.email"
      name="email"
      required
      email
      placeholder="your-email@example.com"
    />
  </form>
</div>

<button
  (click)="makePayment()"
  [disabled]="
    (paymentMethod === 'credit_card' && !creditCardForm?.valid) ||
    (paymentMethod === 'paypal' && !paypalForm?.valid)
  "
>
  Pay Now
</button>